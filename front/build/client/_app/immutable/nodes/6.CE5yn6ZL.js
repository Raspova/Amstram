import{s as k,e as d,c as h,b,f as c,q as m,i as f,k as w,p as y,a as $,l as E,g as q,n as p}from"../chunks/scheduler.31MQ0txa.js";import{S as C,i as x,a as g,c as V,t as v,g as A,b as I,d as P,m as D,e as S}from"../chunks/index.BF6R1Fme.js";import{p as z}from"../chunks/stores.CbGBkNKP.js";import{v as H,g as L,c as M}from"../chunks/appwrite.DbVKEnyX.js";import{g as U}from"../chunks/entry.DshrzVKL.js";import{A as j}from"../chunks/AuthComponant.BqFDSVeY.js";function B(i){let t,s="Vérification de l'email",e,a;return{c(){t=d("h1"),t.textContent=s,e=$(),a=d("div"),this.h()},l(n){t=h(n,"H1",{id:!0,class:!0,"data-svelte-h":!0}),E(t)!=="svelte-w2t49b"&&(t.textContent=s),e=q(n),a=h(n,"DIV",{class:!0}),b(a).forEach(c),this.h()},h(){m(t,"id","titleEmail"),m(t,"class","svelte-n6hqs5"),m(a,"class","loader svelte-n6hqs5")},m(n,o){f(n,t,o),f(n,e,o),f(n,a,o)},p,i:p,o:p,d(n){n&&(c(t),c(e),c(a))}}}function F(i){let t,s;return t=new j({}),t.$on("login",i[1]),{c(){I(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,a){D(t,e,a),s=!0},p,i(e){s||(v(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){S(t,e)}}}function G(i){let t,s,e,a;const n=[F,B],o=[];function u(r,l){return r[0]?1:0}return s=u(i),e=o[s]=n[s](i),{c(){t=d("div"),e.c(),this.h()},l(r){t=h(r,"DIV",{class:!0});var l=b(t);e.l(l),l.forEach(c),this.h()},h(){m(t,"class","container svelte-n6hqs5")},m(r,l){f(r,t,l),o[s].m(t,null),a=!0},p(r,[l]){let _=s;s=u(r),s===_?o[s].p(r,l):(A(),g(o[_],1,1,()=>{o[_]=null}),V(),e=o[s],e?e.p(r,l):(e=o[s]=n[s](r),e.c()),v(e,1),e.m(t,null))},i(r){a||(v(e),a=!0)},o(r){g(e),a=!1},d(r){r&&c(t),o[s].d()}}}function J(i,t,s){let e;w(i,z,r=>s(2,e=r));let a=e.url.searchParams.get("userId")||"",n=e.url.searchParams.get("secret")||"",o=!0;console.log(a,n);function u(){s(0,o=!0),window.location.reload()}return y(async()=>{if(await H(a,n))await U("/");else{alert("Erreur lors de la vérification de l'email, veuillez réessayer");try{await L()?await M():s(0,o=!1)}catch(l){alert("Erreur lors du renvoi de l'email,vous etes possiblement pas connecter"+l),console.error(l)}}}),[o,u]}class W extends C{constructor(t){super(),x(this,t,J,G,k,{})}}export{W as component};
