import{s as k,e as d,c as h,b as v,f as u,m,i as f,k as y,o as E,t as $,a as w,d as q,g as x,h as A,n as p}from"../chunks/B04xoMKH.js";import{S as I,i as P,b as g,e as V,t as b,g as C,c as D,a as S,m as z,d as H}from"../chunks/UcvVvKtv.js";import{p as L}from"../chunks/0QSFtAkf.js";import{v as M,a as U,b as j}from"../chunks/B23_Cm6A.js";import{g as B}from"../chunks/BKQTfDS8.js";import{A as F,c as G}from"../chunks/BLoi9Rgr.js";function J(c){let t,r=G.verifyEmail+"",e,o,n;return{c(){t=d("h1"),e=$(r),o=w(),n=d("div"),this.h()},l(s){t=h(s,"H1",{id:!0,class:!0});var l=v(t);e=q(l,r),l.forEach(u),o=x(s),n=h(s,"DIV",{class:!0}),v(n).forEach(u),this.h()},h(){m(t,"id","titleEmail"),m(t,"class","svelte-n6hqs5"),m(n,"class","loader svelte-n6hqs5")},m(s,l){f(s,t,l),A(t,e),f(s,o,l),f(s,n,l)},p,i:p,o:p,d(s){s&&(u(t),u(o),u(n))}}}function K(c){let t,r;return t=new F({}),t.$on("login",c[1]),{c(){D(t.$$.fragment)},l(e){S(t.$$.fragment,e)},m(e,o){z(t,e,o),r=!0},p,i(e){r||(b(t.$$.fragment,e),r=!0)},o(e){g(t.$$.fragment,e),r=!1},d(e){H(t,e)}}}function N(c){let t,r,e,o;const n=[K,J],s=[];function l(a,i){return a[0]?1:0}return r=l(c),e=s[r]=n[r](c),{c(){t=d("div"),e.c(),this.h()},l(a){t=h(a,"DIV",{class:!0});var i=v(t);e.l(i),i.forEach(u),this.h()},h(){m(t,"class","container svelte-n6hqs5")},m(a,i){f(a,t,i),s[r].m(t,null),o=!0},p(a,[i]){let _=r;r=l(a),r===_?s[r].p(a,i):(C(),g(s[_],1,1,()=>{s[_]=null}),V(),e=s[r],e?e.p(a,i):(e=s[r]=n[r](a),e.c()),b(e,1),e.m(t,null))},i(a){o||(b(e),o=!0)},o(a){g(e),o=!1},d(a){a&&u(t),s[r].d()}}}function O(c,t,r){let e;y(c,L,a=>r(2,e=a));let o=e.url.searchParams.get("userId")||"",n=e.url.searchParams.get("secret")||"",s=!0;console.log(o,n);function l(){r(0,s=!0),window.location.reload()}return E(async()=>{if(await M(o,n))await B("/");else{alert("Erreur lors de la vérification de l'email, veuillez réessayer");try{await U()?await j():r(0,s=!1)}catch(i){alert("Erreur lors du renvoi de l'email,vous etes possiblement pas connecter"+i),console.error(i)}}}),[s,l]}class Z extends I{constructor(t){super(),P(this,t,O,N,k,{})}}export{Z as component};
